<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <title>About New Home</title>
    <script type="text/javascript" src="http://x-tags.org/x-tag.js"></script>
    <script type="text/javascript">
      xtag.register("history", {
        onCreate: function(){
          var self = $(this);
          self.html('<div class="media">' +
              '<div class="img"><img src="' +
                (self.attr('img') || 'http://g.etfv.co/' + self.attr('url')) + '"></div>' +
              '<div class="bd">' +
                  '<div class="title">' + self.text() + '</div>' +
                  '<div class="url">' + self.attr('url') + '</div>' +
              '</div>' +
          '</div>');
        },
      });

      xtag.register("site", {
        onCreate: function(){
          var self = $(this);
          self.html('<div class="newtab-link" ' +
             'title="' + self.text() + ' ' + + self.attr('url') + '" ' +
             'href="' + self.attr('url') + '">' +
            '<div class="newtab-thumbnail" ' +
                  'style="background-image: ' +
                  'url(&quot;moz-page-thumb://thumbnail?url=' + encodeURIComponent(self.attr('url')) +
                  '&quot;);"></div>' +
            '<div class="newtab-title">' + self.text() + '</div>' +
          '</div>');
        },
      });

    </script>
    <style>

/* Base stuff */

  body {
    font: 15px/16px Segoe UI, Verdana, sans-serif;
    background-color: rgb(229, 229, 229);
    background-image: linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.2));
    background-repeat: no-repeat;
    background-attachment: fixed;
    margin: 20px;
    height: calc(100vh - 40px);
  }

  #container {
    display: -moz-box;
    -moz-box-orient: vertical;
    width: 100%;
    height: 100%;
  }


/* Utils */

  /* Debug

  #container > div {
    border: 1px solid red;
  }
  #container > div > * {
    border: 1px solid red;
  }
 */
  /* ====== media ====== */
  .media {
    margin: 20px;
    white-space: nowrap;
  }
  .media, .bd {
    overflow: hidden;
    _overflow: visible;
    zoom: 1;
  }
  .media .img {
    float: left;
    margin-right: 10px;
  }
  .media .img img {
    display: block;
    width: 32px;
    height: 32px;
  }
  .media .imgExt {
    float: right;
    margin-left: 10px;
  }
  .media .title {
    font-size: 120%;
  }
  .media .url {
    color: #888;
    font-size: 80%;
  }

/* Top stuff */

  #top > .button {
    background-repeat: no-repeat;
    background-position: left top;
    margin: 10px;
    padding-left: 20px;
  }

  #top > .separator {
      width: 3px;
      min-width: 3px;
      margin: 0px 10px;
      background-image: linear-gradient(rgba(255, 255, 255, 0),
                                        rgba(255, 255, 255, 0.3) 30%,
                                        rgba(255, 255, 255, 0.3) 70%,
                                        rgba(255, 255, 255, 0)),
                        linear-gradient(rgba(23, 51, 78, 0),
                                        rgba(23, 51, 78, 0.3) 30%,
                                        rgba(23, 51, 78, 0.3) 70%,
                                        rgba(23, 51, 78, 0)),
                        linear-gradient(rgba(255, 255, 255, 0),
                                        rgba(255, 255, 255, 0.3) 30%,
                                        rgba(255, 255, 255, 0.3) 70%,
                                        rgba(255, 255, 255, 0));
      background-size: 1px auto, 1px auto, 1px auto;
      background-position: left top, center top, right top;
      background-repeat: no-repeat;
  }

  #top > img {
    width: 16px;
    height: 16px;
    vertical-align: top;
    margin: 0px 3px;
  }


  /* Top Buttons */

    #home {
      background-image: -moz-image-rect(url(chrome://browser/skin/Toolbar.png), 0, 120, 20, 100);
    }

    #apps {
      background-image: -moz-image-rect(url(chrome://browser/skin/webapps-16.png), 0, 20, 20, 0);
    }

    #whatsnew {
      background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS4xLjIiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFjb3JuIHZlcnNpb24gMy41PC94bXA6Q3JlYXRvclRvb2w%2BCiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI%2BCiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjU8L3RpZmY6Q29tcHJlc3Npb24%2BCiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpYUmVzb2x1dGlvbj43MjwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24%2BCiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE%2BCuzmjGYAAAJNSURBVCgVZVLPaxNBFJ6Z3Y1pzaKbrYeWJEZsNw0m1iKEGJtKLQiKP0pRKqhQyMGz%2F4AXe%2Bl%2FIJ6CVVobJUV7EC9CkVrSYqqsRYlKwCYHTdJsFk26ye74pjE1xQdvfnzfezPfezxMKUUtiy8sHBQMegNTGkUYeRhOEc7CtlS34bnJsbEyw5hBTDNxZjZ5FmN6F2PkaFJ7V4xxlSPCvYmrF1%2FtJs7MJiAJT8MvGFFqiQ4xK4riJuGwVdH0noqu9zU5RGWnNH3%2B3OhTTlEUCWHuPrxiA13Ibu%2FIj1%2B58OiI17Pq9biXfUrv67Ku69qWNggxuFYzQp124S13aXxiEuSGmWTm9UZdzH3Po5XUaiitftROBANvDrtda2l14ya1LMGiFlc3G4d4UDYMDfhXEFx%2BlLaG4XF0QHQ0gEg%2FSCRKtoa5j0IDmBVLmsLDK962tB2CLbwgVEaikWU4SkKtcQvUcKwUZkatJvOWCTf8F2niO2vQ1%2FdSkqRC%2FPFcv2mal9soRAgxQaqZhTSlnWDnwYHgV9jW68b2wz2lAGjjhTJvIWsJW%2Fi%2FxPlnyeua%2FmuUIORkY9BuoOQL4ak5byJUNS0LtRzCDLfL9d7Xe1SF8%2B8WznbGRUInUyQWi5V4QqagSVA%2FEOD7OztyQ5Hwh5EzQy8EQlItnMUEjvkXZVnWdkfuSfL5teLPwh0gbZgQw9%2BvxNWNz%2BswSlPQdSfDBo4HFk%2BHQ59A9spuIqtBVTP%2BzLfM7WKh6Ksa2zJ8b3AE57q7ezajkVPvurokHcLWwPN%2FALNgG4F90ISAAAAAAElFTkSuQmCC);
    }

    #search {
      display: inline-block;
      -moz-user-select: -moz-none;
      background-color: hsla(0,0%,100%,.9);
      border: 1px solid transparent;
      border-color: hsla(210,54%,20%,.25) hsla(210,54%,20%,.27) hsla(210,54%,20%,.3);
      border-radius: 2px;
      box-shadow: 0 1px 0 hsla(0,0%,0%,.01) inset,
                  0 1px 0 hsla(0,0%,100%,.1);
      color: #808080;
      outline-style: none;
      overflow: hidden;

      width: 28%;
      float: right;
      height: 27px;
    }

    #search > .button {
      cursor: default;
      float:right;
      background-color: #FCFCFC;
      background-image: linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.2));
      height: 100%;
      padding: 5px 10px;

      border-left: 1px solid transparent;
      border-color: hsla(210,54%,20%,.25) hsla(210,54%,20%,.27) hsla(210,54%,20%,.3);
    }

    #search > .terms {
      -moz-user-select: text;
      cursor: text;
    }


/* Middle stuff */

  #middle {
    -moz-box-flex: 1;
    padding: 4vh;
  }

  #middle > div {
    height: 65vh;
  }

  #topsites {
    margin-left: 5%;
    width: 65%;
    position: relative;
  }

  #history {
    float: right;
    width: 20%;
    margin-right: 5%;
  }

  .newtab-link {
    float: left;
    margin: 1%;
    width: 30%;
    height: 30%;
  }

  .newtab-thumbnail {
    background-origin: padding-box;
    background-clip: padding-box;
    background-repeat: no-repeat;
    background-size: cover;
    width: 100%;
    height: 90%;
  }

  .newtab-title {
    width: 100%;
    height: 10%;
    overflow: hidden;
    text-overflow: ellipsis;
  }

/* Bottom stuff */

  #bottom {
    padding: 4vh;
  }

  #bottom > div {
    height: 10vh;
  }

  #weather {
    margin-left: 2%;
    width: 30%;
  }

  #snippet {
    float: right;
    width: 30%;
    margin-right: 2%;
  }


    </style>
  </head>
  <body>

    <div id='container'>
      <div id='top'>
        <span id='home' class='button'>Home</span>
        <span id='apps' class='button'>Apps</span>
        <span id='whatsnew' class='button'>What’s New!</span>
        <span class='separator'>&nbsp;</span>
        <img src='chrome://browser/content/abouthome/downloads.png' alt='Downloads'>
        <img src='chrome://browser/content/abouthome/bookmarks.png' alt='Bookmarks'>
        <img src='chrome://browser/content/abouthome/addons.png' alt='Add-ons'>
        <img src='chrome://browser/content/abouthome/settings.png' alt='Settings'>
        <div id='search'><div class='button'>Search</div><div class='terms'>&nbsp;</div></div>
      </div>
      <div id='middle'>
        <div id='history'><h3>History!</h3>
          <history img='https://www.dropbox.com/static/images/favicon-vfl7PByQm.ico'
                   url='https://www.dropbox.com/'>Dropbox</history>
          <history url='http://yelp.com/'>Yelp</history>
          <history url='http://amazon.com/'>Amazon</history>
          <history url='http://www.npr.org/'>NPR</history>
        </div>
        <div id='topsites'>
          <site url="http://www.weatheroffice.gc.ca/city/pages/on-143_metric_e.html">Toronto, Ontario - 7 Day Forecast - Environment Canada</site>
          <site url="https://bugzilla.mozilla.org/request.cgi?action=queue&requestee=bwinton@mozilla.com">Request Queue</site>
          <site url="https://people.mozilla.com/~bwinton/australis/customization/mac/">Home</site>
          <site url="https://mail.mozilla.com/zimbra/#1">Zimbra: Inbox</site>
        </div>
      </div>
      <div id='bottom'>
        <div id='snippet'>Snippet!</div>
        <div id='weather'>Weather!  It’s raining!</div>
      </div>
    </div>

    <script src='http://code.jquery.com/jquery-latest.js'></script>
  </body>
</html>
